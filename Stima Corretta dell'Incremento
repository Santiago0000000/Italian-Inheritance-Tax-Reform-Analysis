// Calcolo più realistico considerando fattori comportamentali ed amministrativi

const gettito_teorico = 22583; // milioni calcolati sopra
const gettito_attuale = 800; // milioni

// Fattori di correzione basati su evidenze empiriche internazionali
const correzioni = {
    elasticita_elusione: 0.35,        // 35% riduzione per elusione/evasione
    capacita_amministrativa: 0.25,    // 25% riduzione per limiti amministrativi  
    periodo_transizione: 0.15,        // 15% riduzione per periodo di adeguamento
    resistenza_politica: 0.10         // 10% riduzione per modifiche normative
};

console.log("=== STIMA REALISTICA INCREMENTO GETTITO ===\n");

console.log("Fattori di correzione applicati:");
let gettito_corretto = gettito_teorico;

for (let fattore in correzioni) {
    const riduzione_perc = correzioni[fattore];
    const riduzione_valore = gettito_corretto * riduzione_perc;
    gettito_corretto -= riduzione_valore;
    
    console.log(`- ${fattore.replace(/_/g, ' ')}: -${(riduzione_perc*100).toFixed(0)}% (€${riduzione_valore.toFixed(0)} milioni)`);
}

console.log(`\nGettito teorico: €${gettito_teorico.toFixed(0)} milioni`);
console.log(`Gettito realistico: €${gettito_corretto.toFixed(0)} milioni`);
console.log(`Incremento effettivo: €${(gettito_corretto - gettito_attuale).toFixed(0)} milioni`);
console.log(`Moltiplicatore rispetto al gettito attuale: ${(gettito_corretto/gettito_attuale).toFixed(1)}x`);

// Analisi di sensibilità - scenario conservativo
console.log("\n=== SCENARIO CONSERVATIVO ===");
const correzione_aggiuntiva = 0.30; // ulteriore 30% di riduzione
const gettito_conservativo = gettito_corretto * (1 - correzione_aggiuntiva);

console.log(`Gettito scenario conservativo: €${gettito_conservativo.toFixed(0)} milioni`);
console.log(`Incremento conservativo: €${(gettito_conservativo - gettito_attuale).toFixed(0)} milioni`);
console.log(`Moltiplicatore conservativo: ${(gettito_conservativo/gettito_attuale).toFixed(1)}x`);

// Confronto con sistemi fiscali europei
console.log("\n=== BENCHMARKING EUROPEO ===");
const gettito_successioni_eu = {
    "Francia": 4200,      // milioni euro, aliquota max 45%
    "Germania": 1800,     // milioni euro, aliquota max 50%
    "Regno Unito": 2100,  // milioni euro, aliquota 40%
    "Spagna": 900         // milioni euro, sistema regionale
};

console.log("Gettito successioni paesi UE (milioni €):");
for (let paese in gettito_successioni_eu) {
    console.log(`  ${paese}: €${gettito_successioni_eu[paese]}`);
}

const media_eu_pil = 0.15; // % PIL media UE per imposte successione
const pil_italia = 2100000; // milioni euro (stima)
const gettito_potenziale_pil = pil_italia * media_eu_pil / 100;

console.log(`\nGettito teorico Italia (0.15% PIL): €${gettito_potenziale_pil.toFixed(0)} milioni`);
console.log(`Attuale rapporto PIL: ${((gettito_attuale/pil_italia)*100).toFixed(3)}%`);
